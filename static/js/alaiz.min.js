document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("navToggle"),t=document.querySelector(".nav-menu");e&&e.addEventListener("click",function(){t.classList.toggle("active"),this.classList.toggle("active")}),document.querySelectorAll(".nav-menu a").forEach(e=>{e.addEventListener("click",()=>{t.classList.remove("active"),e.classList.remove("active")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=document.querySelector(".nav").offsetHeight,t=e=>{e.style.opacity="1",e.style.transform="translateY(0)"},o=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&t(e.target)})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".formation-card, .article-card, .artiste-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity .6s ease, transform .6s ease",o.observe(e)})}})}),window.addEventListener("scroll",function(){const e=document.querySelector(".nav");window.scrollY>100?(e.style.background="rgba(10,10,10,.98)",e.style.padding=".5rem 0"):(e.style.background="rgba(10,10,10,.95)",e.style.padding="1rem 0")});const o=document.getElementById("contactForm");o&&o.addEventListener("submit",async function(e){e.preventDefault();const t=new FormData(this),o=this.querySelector('button[type="submit"]'),c=o.innerHTML;try{o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Envoi en cours...',o.disabled=!0;const e=await fetch(this.action,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}),c=await e.json();n(c.message,c.success?"success":"error"),c.success&&this.reset()}catch(e){n("Erreur rÃ©seau. Contactez-nous directement par tÃ©lÃ©phone.","error")}finally{o.innerHTML=c,o.disabled=!1}});const n=(e,t="info")=>{const o=document.createElement("div");o.className=`notification notification-${t}`,o.innerHTML=`<div class="notification-content"><i class="fas fa-${"success"===t?"check":"exclamation"}"></i><span>${e}</span></div><button class="notification-close">&times;</button>`,o.style.cssText="position:fixed;top:100px;right:20px;background:"+("success"===t?"#4CAF50":"#f44336")+";color:white;padding:1rem 1.5rem;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:10000;display:flex;align-items:center;gap:1rem;max-width:400px;animation:slideInRight .3s ease",o.querySelector(".notification-close").addEventListener("click",()=>{o.style.animation="slideOutRight .3s ease",setTimeout(()=>o.remove(),300)}),document.body.appendChild(o),setTimeout(()=>{o.parentNode&&(o.style.animation="slideOutRight .3s ease",setTimeout(()=>o.remove(),300))},5e3)};document.querySelectorAll(".category-btn").forEach(e=>{e.addEventListener("click",function(){document.querySelectorAll(".category-btn").forEach(e=>e.classList.remove("active")),this.classList.add("active");const e=document.querySelector(".blog-articles");e.style.opacity=".5",setTimeout(()=>{e.style.opacity="1",n("Filtrage des articles...","info")},500)})});const c=()=>{const e=document.querySelectorAll(".stat-number"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target,c=parseInt(o.textContent.replace("+",""));let n=0,i=c/50,a=setInterval(()=>{n+=i,n>=c?(o.textContent=c+"+",clearInterval(a)):o.textContent=Math.floor(n)+"+"},30),t.unobserve(o)}}},{threshold:.5});e.forEach(e=>t.observe(e))},i=()=>{localStorage&&(localStorage.alaizVisitCount=parseInt(localStorage.alaizVisitCount||0)+1,console.log(`Merci pour votre visite ! C'est votre ${localStorage.alaizVisitCount}Ã¨me visite sur A Laiz Prod.`))},a=()=>{const e=document.createElement("style");e.textContent="@keyframes slideInRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOutRight{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}",document.head.appendChild(e),console.log("ðŸš€ A Laiz Prod - Site optimisÃ© avec succÃ¨s !")};c(),i(),a()});
